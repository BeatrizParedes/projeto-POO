<div class="pagina">
  <header class="topo">
    <h1 class="titulo">Minha Lista de Desejos</h1>

    <form class="usuario-form" (ngSubmit)="carregar()">
      <label for="usuario" class="sr-only">Nome do usuário</label>
      <input
        id="usuario"
        type="text"
        class="usuario-input"
        placeholder="Seu nome de usuário"
        [formControl]="nomeUsuarioCtrl"
        autocomplete="username"
      />
      
      
    </form>
  </header>

  <!-- Estado de carregamento -->
  <section *ngIf="loading" class="estado loading" aria-live="polite">
    Carregando sua lista…
  </section>

  <!-- Estado de erro -->
  <section *ngIf="!loading && errorMsg" class="estado erro" role="alert">
    {{ errorMsg }}
  </section>

  <!-- Conteúdo principal -->
  <section *ngIf="!loading && !errorMsg" class="conteudo">

    <!-- Lista vazia -->
    <div *ngIf="total === 0" class="estado vazio">
      <p>Nenhum item por aqui ainda.</p>
      <p class="hint">Dica: visite a página de um livro e clique em “Adicionar à lista de desejos”.</p>
    </div>

    <!-- Lista com itens -->
    <div *ngIf="total > 0" class="lista-container">

      <div class="lista-header">
        <span class="quantidade" aria-live="polite">
          {{ total }} {{ total === 1 ? 'item' : 'itens' }}
        </span>
      </div>

      <ul class="lista-livros" role="list">

        <li class="livro-card" *ngFor="let item of itens; trackBy: trackById">
          <div class="livro-info">

            <h3 class="livro-titulo">{{ titulo(item.livro) }}</h3>

            <p><strong>Autor:</strong> {{ autor(item.livro) || "—" }}</p>
            <p><strong>Gênero:</strong> {{ item.livro.genero }}</p>
            <p><strong>Preço:</strong> R$ {{ item.livro.preco }}</p>
            <p><strong>Descrição:</strong> {{ item.livro.descricao }}</p>

            <div class="livro-actions">
              <button class="btn primario" (click)="verDetalhes(idLivro(item.livro))">
                Ver detalhes
              </button>

              <button class="btn perigo" (click)="remover(item)">
                Remover
              </button>
            </div>

          </div>
        </li>

      </ul>

    </div>

  </section>
</div>
